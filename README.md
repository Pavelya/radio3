# AI Radio 2525 ğŸ™ï¸

**Broadcasting from the year 2525** - An experimental AI-powered radio station featuring fully autonomous content generation, real-time speech synthesis, and continuous streaming.

## What is this?

AI Radio 2525 is a complete radio station where everything is generated by AI:
- **Scripts**: Generated by Claude (Anthropic AI)
- **Voice**: Synthesized by Piper TTS
- **Music**: AI-composed soundscapes
- **Schedule**: Automated program scheduling
- **Broadcasting**: 24/7 live streaming via Icecast

Experience radio from 500 years in the future - news, culture, and entertainment from the year 2525.

## Features

- âœ… **Fully Autonomous**: Content generated and broadcast automatically
- âœ… **Live Streaming**: 24/7 broadcast via Icecast (Opus & MP3)
- âœ… **Web Player**: Public-facing player with now-playing info
- âœ… **Admin Dashboard**: Manage content, schedule, and monitor system
- âœ… **Knowledge Base**: RAG system for contextual content generation
- âœ… **Priority System**: Breaking news and special segments
- âœ… **Multiple DJs**: Different AI personalities and voices
- âœ… **Audio Mastering**: Professional loudness normalization
- âœ… **Format Clocks**: Structured program formats

## Quick Start

### 1. Prerequisites

```bash
# Install dependencies
pnpm install

# Set up environment
cp .env.example .env
# Edit .env with your API keys (ANTHROPIC_API_KEY, SUPABASE_URL, etc.)

# Initialize database
node infra/migrate.js up
node infra/seed.js
```

### 2. Start Services

```bash
# Start all backend services
./ops/start-all.sh

# In separate terminals, start web interfaces:
pnpm --filter @radio/admin dev     # Admin Dashboard (port 3001)
pnpm --filter @radio/web dev       # Public Player (port 3000)
```

### 3. Access

- **Listen**: http://localhost:3000
- **Manage**: http://localhost:3001
- **Stream**: http://localhost:8001/radio.opus

See **[QUICKSTART.md](QUICKSTART.md)** for detailed instructions.

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WEB LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Public Playerâ”‚              â”‚Admin Dashboardâ”‚       â”‚
â”‚  â”‚  (Next.js)   â”‚              â”‚  (Next.js)    â”‚       â”‚
â”‚  â”‚  Port 3000   â”‚              â”‚  Port 3001    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API LAYER                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Express API Server (Port 8000)          â”‚  â”‚
â”‚  â”‚  â€¢ RAG endpoints                                â”‚  â”‚
â”‚  â”‚  â€¢ Admin API                                    â”‚  â”‚
â”‚  â”‚  â€¢ Playout management                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  WORKER LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Scheduler   â”‚  â”‚ Segment Gen  â”‚  â”‚  Embedder    â”‚ â”‚
â”‚  â”‚   Worker     â”‚  â”‚   Workers    â”‚  â”‚   Workers    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚  Mastering   â”‚                                      â”‚
â”‚  â”‚   Workers    â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 STREAMING LAYER                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Liquidsoap  â”‚  â”‚   Icecast    â”‚  â”‚  Piper TTS   â”‚ â”‚
â”‚  â”‚   (Playout)  â”‚â†’ â”‚  (Streaming) â”‚  â”‚  (Synthesis) â”‚ â”‚
â”‚  â”‚              â”‚  â”‚  Port 8001   â”‚  â”‚  Port 5002   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

See **[.claude/ARCHITECTURE.md](.claude/ARCHITECTURE.md)** for complete architecture documentation.

## Project Structure

```
radio3/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ admin/          # Admin dashboard (Next.js)
â”‚   â”œâ”€â”€ api/            # Express API server
â”‚   â”œâ”€â”€ playout/        # Liquidsoap + Icecast (streaming)
â”‚   â””â”€â”€ web/            # Public web player (Next.js)
â”œâ”€â”€ workers/
â”‚   â”œâ”€â”€ scheduler/      # Schedule management & job creation
â”‚   â”œâ”€â”€ segment-gen/    # Content generation (scripts + TTS)
â”‚   â”œâ”€â”€ embedder/       # Knowledge base embedding
â”‚   â””â”€â”€ mastering/      # Audio mastering & normalization
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ radio-core/     # Shared utilities & types
â”œâ”€â”€ services/
â”‚   â””â”€â”€ piper-tts/      # TTS service wrapper
â”œâ”€â”€ infra/              # Database migrations & scripts
â”œâ”€â”€ ops/                # Operations scripts
â”‚   â”œâ”€â”€ start-all.sh    # Start all services
â”‚   â”œâ”€â”€ stop-all.sh     # Stop all services
â”‚   â””â”€â”€ status.sh       # Check service status
â””â”€â”€ .claude/            # Architecture & task documentation
```

## Key Technologies

- **Frontend**: Next.js 14, React, Tailwind CSS
- **Backend**: Express, Node.js, TypeScript
- **AI**: Claude (Anthropic), RAG with embeddings
- **TTS**: Piper (neural text-to-speech)
- **Streaming**: Liquidsoap, Icecast
- **Database**: Supabase (PostgreSQL)
- **Audio**: FFmpeg, loudness normalization
- **Infrastructure**: Docker, pnpm workspaces

## Operations

### Start All Services
```bash
./ops/start-all.sh
```

### Check Status
```bash
./ops/status.sh
```

### Stop All Services
```bash
./ops/stop-all.sh
```

### View Logs
```bash
tail -f logs/*.log
docker logs radio-liquidsoap -f
```

See **[OPERATIONS.md](OPERATIONS.md)** for complete operations guide.

## Development

### Install Dependencies
```bash
pnpm install
```

### Run Type Checking
```bash
pnpm typecheck
```

### Build All Packages
```bash
pnpm build
```

### Run Tests
```bash
pnpm test
```

### Quality Gate
```bash
pnpm quality-gate
```

## Documentation

| Document | Description |
|----------|-------------|
| [QUICKSTART.md](QUICKSTART.md) | Get started in 5 minutes |
| [OPERATIONS.md](OPERATIONS.md) | Complete operations guide |
| [ARCHITECTURE.md](.claude/ARCHITECTURE.md) | System architecture |
| [TESTING.md](TESTING.md) | Testing procedures |
| [TASKS.md](.claude/TASKS.md) | Implementation tasks |
| [apps/playout/README.md](apps/playout/README.md) | Streaming setup |

## Service URLs

| Service | URL | Credentials |
|---------|-----|-------------|
| Public Player | http://localhost:3000 | - |
| Admin Dashboard | http://localhost:3001 | (configured in Supabase) |
| API Server | http://localhost:8000 | - |
| Stream (Opus) | http://localhost:8001/radio.opus | - |
| Stream (MP3) | http://localhost:8001/radio.mp3 | - |
| Icecast Admin | http://localhost:8001/admin/ | admin / admin |

## Environment Variables

Key environment variables (see `.env.example`):

```bash
# AI Services
ANTHROPIC_API_KEY=your-api-key
EMBEDDING_API_KEY=your-hf-key

# Database
SUPABASE_URL=your-supabase-url
SUPABASE_SERVICE_ROLE_KEY=your-key

# Streaming
ICECAST_PORT=8001
ICECAST_SOURCE_PASSWORD=hackme

# TTS
PIPER_TTS_URL=http://localhost:5002
```

## Troubleshooting

### Services won't start
```bash
# Check ports
lsof -i :8000,8001,5002

# Kill stuck processes
./ops/stop-all.sh
pkill -9 -f pnpm
```

### No audio output
```bash
# Check Liquidsoap logs
docker logs radio-liquidsoap

# Check segments
ls -la apps/playout/audio/

# Verify workers running
./ops/status.sh
```

### Database errors
```bash
# Re-run migrations
node infra/migrate.js down
node infra/migrate.js up
node infra/seed.js
```

See [OPERATIONS.md](OPERATIONS.md) for more troubleshooting.

## Contributing

This is an experimental project. Feel free to explore, modify, and extend!

## License

[Add your license here]

## Credits

- **AI**: Anthropic Claude
- **TTS**: Piper by Rhasspy
- **Streaming**: Liquidsoap & Icecast
- **Database**: Supabase

---

**AI Radio 2525** - Experience the future of broadcasting. ğŸµğŸ“¡ğŸ¤–
